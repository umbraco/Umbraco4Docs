---
versionFrom: 8.0.0
meta.Title: "Installing and Configuring Umbraco Deploy"
meta.Description: "Steps to how to install and configure Umbraco Deploy"
---

# Installing Umbraco Deploy

In this article, we will cover the steps in order for you to install and configure Umbraco Deploy on a new or existing website.

## Prerequisites

Ensure you have read and followed the setup guide for [new](../New-site) or [new](../Existing-site) projects.

## Source Control Configuration

After the Umbraco files have been committed add the following lines to the .gitignore so that they will not be picked up by Git when we are deploying.

```none
**/App_Data/*
!**/App_Data/packages
**/media/*

# Umbraco deploy specific
**/data/deploy*
```

:::note
The deploy specific update here will ensure that temporary files generated by Deploy during it's operations will not be included in source control.
:::

Make sure that the updates to the .gitignore file are also committed.

## Installing and Configuring Umbraco Deploy

When Umbraco has been installed in a repository, we can go ahead and install Umbraco Deploy in the project.

To install Umbraco deploy in Visual Studio, you can either go to the NuGet Package Manager and search for ```UmbracoDeploy.OnPrem``` or run ```Install-Package UmbracoDeploy.OnPrem``` via the Package Manager.

:::note
To be able to use Umbraco Forms with Umbraco Deploy, you need to install the  ```UmbracoDeploy.Forms``` package as well.

Umbraco Deploy supports Forms version 8.5 and up.
:::

:::note
In order to deploy content based on certain rich core and community property editors - including Nested Content, Multi URL Picker and Block List Editor - there is one further NuGet package to install: ```UmbracoDeploy.Contrib```.
:::

Once the installation has finished you might notice a new file in your `/config` folder called `UmbracoDeploy.config`. This files tells the deployment engine where to deploy to. It knows which environment you’re currently on (for example local or staging) and it will choose the next environment in the list to deploy to.

When Umbraco Deploy has been installed, to be able to use it in the project you will need to add the following `appSetting` to the `web.config` of the project:

```xml
<add key="Umbraco.Deploy.ApiKey" value="YourAPIKeyHere" />
```

The `Umbraco.Deploy.ApiKey` value needs to be replaced with your own Deploy API key.

The following code snippet can be used to generate a random key, using a tool like LinqPad.

```C#

public string GetRandomKey(int bytelength)
{
   byte[] buff = new byte[bytelength];
   RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
   rng.GetBytes(buff);
   StringBuilder sb = new StringBuilder(bytelength * 2);
   for (int i = 0; i < buff.Length; i++)
       sb.Append(string.Format("{0:X2}", buff[i]));
   return sb.ToString();
}

```

This same Deploy API key must be used on each environment for the same website.

:::note
We strongly recommend to generate different keys for different websites.
:::

Once the `appSetting` and API key have been added, it is now time to configure the environments in the `UmbracoDeploy.config` file.

The config file will look like this:

```xml

<?xml version="1.0" encoding="utf-8"?>
<environments xmlns="urn:umbracodeploy-environments">
  <environment type="development"
    name="Development"
    id="00000000-0000-0000-0000-000000000000">
      http://development/
  </environment>
  <environment type="staging"
    name="Staging"
    id="00000000-0000-0000-0000-000000000000">
      http://staging/
   </environment>
  <environment type="live"
    name="Live"
    id="00000000-0000-0000-0000-000000000000">
      http://live/
  </environment>
</environments>


```

You will need to generate a unique GUID for each environment. This can be done in Visual Studio:

1. Open "Tools".
2. Select "Create GUID".
3. Use the Registry Format.
4. Copy the GUID into the `id` value.
5. Generate a "New GUID" for each environment you will be adding to your setup.

The `type` value is for informational purposes in the backoffice but in most cases will be the same (lowercased) value of the Name.

The URLs for each environment needs to be accessible by the other environments over **HTTPS**.

When you have set up your environments in the `UmbracoDeploy.Config` the following `AppSetting` needs to be set on the different environments that you have set up with Umbraco Deploy:

```xml
<add key="Umbraco.Deploy.EnvironmentName" value="TheEnvironmentTypeHere" />
```

:::note
You're free to update the `name` attribute to make it clearer in the interface where you're deploying to. So, if you want to name “Development” something like “The everything-goes area” then you can do that and it will be shown when deploying to that environment.
:::

Once the configuration has been set up with the correct information we can now go ahead and make sure that the source control is including our files in the `~/data` folder of our Umbraco project.

This can be done by going to the `~/data/revision` folder of the project and create a test `.uda` file, and then check in either your Git GUI or in the command line and verify whether the test file is being tracked.

:::tip
If you do not see a `/data` folder in the root of your project, you might need to start up the project first.
:::

![Test UDA file](images/test-UDA.png)

We can see that the file has been created and it is being tracked by Git and we can go ahead and delete the test file.

Now that Umbraco Deploy has been installed on the project, we can go ahead and commit the files to the repository.

**Do not push the files up yet** as a CI/CD build server will first need to be set up and connected to our a repository.

### Include your Umbraco Deploy license file

Before moving on to setting up the build server, make sure that your license is included in your project.

The file needs to be placed in the `/bin` folder.
